{"ast":null,"code":"import _slicedToArray from \"C:/Users/user/Documents/BIT/PROJECT/Blockchain Land System/black-dashboard-react-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\BIT\\\\PROJECT\\\\Blockchain Land System\\\\black-dashboard-react-master\\\\src\\\\components\\\\CreateRecords\\\\CreateMultipleRecord.js\",\n    _s = $RefreshSig$();\n\nimport { UserAndRecordsContext } from 'contexts/UserAndRecordsContext';\nimport React, { useState } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CreateMultipleRecord(_ref) {\n  _s();\n\n  var _this = this;\n\n  var setShowModal = _ref.setShowModal,\n      setCreatedRecords = _ref.setCreatedRecords;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      file = _useState2[0],\n      setFile = _useState2[1];\n\n  var fileReader = new FileReader();\n  var baseURL = 'http://localhost:3500/';\n\n  var handleOnChange = function handleOnChange(e) {\n    setFile(e.target.files[0]);\n  };\n\n  var sendToBackend = function sendToBackend(records, users) {\n    var postURL = \"\".concat(baseURL, \"seed\");\n    axios.post(postURL, {\n      users: users,\n      records: records\n    }).then(function (res) {\n      if (res.status === 201) {\n        toast.success(res.data.message);\n        setShowModal(false);\n        setCreatedRecords(true);\n      }\n    }).catch(function (err) {\n      console.log(err);\n      toast.error(err.response.data.message);\n    });\n  };\n\n  var removeForwardSlash = function removeForwardSlash(title) {\n    if (title) {\n      var result = title.replaceAll('/', '');\n      return result;\n    }\n  };\n\n  var convertToRealPrice = function convertToRealPrice(amount) {\n    // console.log({ amount });\n    var actualPrice = parseFloat(amount) * 1000000;\n    return actualPrice;\n  };\n\n  var csvFileToArray = function csvFileToArray(string, changeImportedDetails) {\n    var csvHeader = string.slice(0, string.indexOf('\\n')).split(',');\n    var csvRows = string.slice(string.indexOf('\\n') + 1).split('\\n');\n    var array = csvRows.map(function (i) {\n      var values = i.split(',');\n      var obj = csvHeader.reduce(function (object, header, index) {\n        object[header] = values[index];\n        return object;\n      }, {});\n      return obj;\n    });\n    var landDetails = [];\n    var userDetails = [];\n    array.map(function (land) {\n      landDetails.push({\n        referenceNumber: removeForwardSlash(land['Land Title']),\n        size: land['Land Size(Acres)'],\n        price: convertToRealPrice(Object.values(land).slice(4, 5)),\n        owner: land['Full Name']\n      });\n      userDetails.push({\n        name: land['Full Name'],\n        credit: 5000000,\n        role: 'buyer'\n      });\n      return null;\n    });\n    sendToBackend(landDetails, userDetails);\n    setShowModal(false);\n  };\n\n  var handleOnSubmit = function handleOnSubmit(e, changeImportedDetails) {\n    e.preventDefault();\n\n    if (file) {\n      fileReader.onload = function (event) {\n        var csvOutput = event.target.result;\n        csvFileToArray(csvOutput, changeImportedDetails);\n      };\n\n      fileReader.readAsText(file);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserAndRecordsContext.Consumer, {\n    children: function children(_ref2) {\n      var changeImportedDetails = _ref2.changeImportedDetails;\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: 'file',\n          accept: '.csv',\n          onChange: handleOnChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"info\",\n          onClick: function onClick(e) {\n            return handleOnSubmit(e, changeImportedDetails);\n          },\n          children: \"IMPORT CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, _this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 3\n  }, this);\n}\n\n_s(CreateMultipleRecord, \"r2TYF+Fv8c2PpNlLvKTx2zIPeds=\");\n\n_c = CreateMultipleRecord;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateMultipleRecord\");","map":{"version":3,"names":["UserAndRecordsContext","React","useState","Button","axios","toast","CreateMultipleRecord","setShowModal","setCreatedRecords","file","setFile","fileReader","FileReader","baseURL","handleOnChange","e","target","files","sendToBackend","records","users","postURL","post","then","res","status","success","data","message","catch","err","console","log","error","response","removeForwardSlash","title","result","replaceAll","convertToRealPrice","amount","actualPrice","parseFloat","csvFileToArray","string","changeImportedDetails","csvHeader","slice","indexOf","split","csvRows","array","map","i","values","obj","reduce","object","header","index","landDetails","userDetails","land","push","referenceNumber","size","price","Object","owner","name","credit","role","handleOnSubmit","preventDefault","onload","event","csvOutput","readAsText"],"sources":["C:/Users/user/Documents/BIT/PROJECT/Blockchain Land System/black-dashboard-react-master/src/components/CreateRecords/CreateMultipleRecord.js"],"sourcesContent":["import { UserAndRecordsContext } from 'contexts/UserAndRecordsContext';\r\nimport React, { useState } from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function CreateMultipleRecord({\r\n\tsetShowModal,\r\n\tsetCreatedRecords,\r\n}) {\r\n\tconst [file, setFile] = useState();\r\n\r\n\tconst fileReader = new FileReader();\r\n\tconst baseURL = 'http://localhost:3500/';\r\n\r\n\tconst handleOnChange = (e) => {\r\n\t\tsetFile(e.target.files[0]);\r\n\t};\r\n\r\n\tconst sendToBackend = (records, users) => {\r\n\t\tconst postURL = `${baseURL}seed`;\r\n\t\taxios\r\n\t\t\t.post(postURL, {\r\n\t\t\t\tusers,\r\n\t\t\t\trecords,\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res.status === 201) {\r\n\t\t\t\t\ttoast.success(res.data.message);\r\n\t\t\t\t\tsetShowModal(false);\r\n\t\t\t\t\tsetCreatedRecords(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\ttoast.error(err.response.data.message);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst removeForwardSlash = (title) => {\r\n\t\tif (title) {\r\n\t\t\tconst result = title.replaceAll('/', '');\r\n\t\t\treturn result;\r\n\t\t}\r\n\t};\r\n\r\n\tconst convertToRealPrice = (amount) => {\r\n\t\t// console.log({ amount });\r\n\t\tconst actualPrice = parseFloat(amount) * 1000000;\r\n\t\treturn actualPrice;\r\n\t};\r\n\r\n\tconst csvFileToArray = (string, changeImportedDetails) => {\r\n\t\tconst csvHeader = string.slice(0, string.indexOf('\\n')).split(',');\r\n\t\tconst csvRows = string.slice(string.indexOf('\\n') + 1).split('\\n');\r\n\r\n\t\tconst array = csvRows.map((i) => {\r\n\t\t\tconst values = i.split(',');\r\n\t\t\tconst obj = csvHeader.reduce((object, header, index) => {\r\n\t\t\t\tobject[header] = values[index];\r\n\t\t\t\treturn object;\r\n\t\t\t}, {});\r\n\t\t\treturn obj;\r\n\t\t});\r\n\t\tconst landDetails = [];\r\n\t\tconst userDetails = [];\r\n\t\tarray.map((land) => {\r\n\t\t\tlandDetails.push({\r\n\t\t\t\treferenceNumber: removeForwardSlash(land['Land Title']),\r\n\t\t\t\tsize: land['Land Size(Acres)'],\r\n\t\t\t\tprice: convertToRealPrice(Object.values(land).slice(4, 5)),\r\n\t\t\t\towner: land['Full Name'],\r\n\t\t\t});\r\n\t\t\tuserDetails.push({\r\n\t\t\t\tname: land['Full Name'],\r\n\t\t\t\tcredit: 5000000,\r\n\t\t\t\trole: 'buyer',\r\n\t\t\t});\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tsendToBackend(landDetails, userDetails);\r\n\t\tsetShowModal(false);\r\n\t};\r\n\r\n\tconst handleOnSubmit = (e, changeImportedDetails) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (file) {\r\n\t\t\tfileReader.onload = function (event) {\r\n\t\t\t\tconst csvOutput = event.target.result;\r\n\t\t\t\tcsvFileToArray(csvOutput, changeImportedDetails);\r\n\t\t\t};\r\n\r\n\t\t\tfileReader.readAsText(file);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<UserAndRecordsContext.Consumer>\r\n\t\t\t{({ changeImportedDetails }) => (\r\n\t\t\t\t<form className='d-flex justify-content-between'>\r\n\t\t\t\t\t<input type={'file'} accept={'.csv'} onChange={handleOnChange} />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor='info'\r\n\t\t\t\t\t\tonClick={(e) => handleOnSubmit(e, changeImportedDetails)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tIMPORT CSV\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</form>\r\n\t\t\t)}\r\n\t\t</UserAndRecordsContext.Consumer>\r\n\t);\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}